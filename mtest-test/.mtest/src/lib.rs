# ! [ feature ( proc_macro ) ] # ! [ feature ( i128 ) ] # ! [ feature ( proc_macro ) ] # ! [ cfg_attr ( test , feature ( i128 ) ) ] # [ mockable ] extern crate mocktopus as mocktopus_injected_by_mtest ; # [ mockable ] extern crate lazy_static ; # [ mockable ] extern crate rand ; # [ mockable ] extern crate rand as rand2 ; # [ cfg ( test ) ] # [ mockable ] extern crate mocktopus ; # [ cfg ( test ) ] # [ mockable ] use mocktopus :: macros :: mocktopus_test ; # [ mockable ] const CONSTANT : u8 = 1 ; # [ mockable ] mod another ; # [ cfg ( test ) ] # [ mockable ] mod tests { extern crate rand as rand3 ; use super :: * ; # [ test ] fn constant_test ( ) { rand :: thread_rng ( ) ; rand2 :: thread_rng ( ) ; assert_eq ! ( 1 , CONSTANT ) ; } # [ mocktopus_test ] fn sometimes_test ( ) { rand :: thread_rng ( ) ; rand2 :: thread_rng ( ) ; assert_eq ! ( 1 , CONSTANT ) ; } }